<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="bprinty@gmail.com">
    <title>Quorra Example Page</title>

    <!-- css -->
    <link href="../dist/quorra.css" rel="stylesheet">

    <!-- custom styles -->
    <style>
        body {
            padding-top: 10px;
        }
        #grouped,
        #stacked {
            width: 800px;
            height: 500px;
        }
        #grouped .plotarea,
        #stacked .plotarea {
            width: 700px;
            height: 500px;
        }
    </style>
  </head>

  <body>

    <div id="grouped" class="container">
        <div class="plotarea"></div>
    </div>
    <div id="stacked" class="container">
        <div class="plotarea"></div>
    </div>

    <script src="../lib/d3/d3.min.js"></script>
    <script src="../lib/underscore/underscore-min.js"></script>
    <script src="../dist/quorra.js"></script>
    <script>
        // simulate data
        quorra.seed(678);
        function layerup(n, o) {
            function bump(a) {
                var x = 1 / (.1 + quorra.random()),
                    y = 2 * quorra.random() - .5,
                    z = 10 / (.1 + quorra.random());
                for (var i = 0; i < n; i++) {
                    var w = (i / n - y) * z;
                    a[i] += x * Math.exp(-w * w);
                }
            }
            var a = [], i;
            for (i = 0; i < n; ++i) a[i] = o + o * quorra.random();
            for (i = 0; i < 5; ++i) bump(a);
            return a.map(function(d, i) { return {
                x: i,
                y: Math.max(0, d),
            }; });
        }
        var groups = 2;
        var samples = 20;
        var stack = d3.layout.stack();
        var layerdata = stack(d3.range(groups).map(function() { return layerup(samples, 0.1); }));
        var data = [];
        for (var layer in layerdata) {
            data = data.concat(_.map(layerdata[layer], function(d, i){
                return {
                    x: d.x,
                    y: d.y,
                    group: (layer == 1) ? 'Good': 'Evil',
                    label: (layer == 1) ? ('Good' + i): ('Evil' + i)
                };
            }));
        }
        var redblue = d3.scale.ordinal().domain(['Evil', 'Good']).range(['firebrick','steelblue']);

        // grouped bar
        var grouped = quorra.bar()
            .width(500)
            .height(400)
            .grid(true)
            .layout('grouped')
            .xlabel("X Axis Label")
            .ylabel("Y Axis Label")
            .color(redblue);

        d3.select('#grouped .plotarea')
            .datum(data).call(grouped);

        // stacked bar
        var stacked = quorra.bar()
            .width(500)
            .height(400)
            .layout('stacked')
            .xlabel("X Axis Label")
            .ylabel("Y Axis Label")
            .color(redblue);

        d3.select('#stacked .plotarea')
            .datum(data).call(stacked);


    </script>
  </body>
</html>
