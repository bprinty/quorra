<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="bprinty@gmail.com">
    <title>Quorra Example Page</title>

    <!-- css -->
    <link href="../dist/quorra.css" rel="stylesheet">
    <link href="./css/common.css" rel="stylesheet">

    <!-- js -->
    <script src="./js/ace.js"></script>
    <script src="./js/common.js"></script>

    <!-- custom styles -->
    <style>
        #grouped,
        #stacked {
            width: 600px;
            height: 400px;
            margin-bottom: 20px;
            margin-top: 40px;
            margin-left: auto;
            margin-right: auto;
        }
        #grouped .plotarea,
        #stacked .plotarea {
            width: 600px;
            height: 400px;
        }
    </style>
  </head>

  <body>

    <div id="header">
        <h1>Bar Plot</h1>
    </div>

    <div id="plots">

        <div id="grouped" class="container">
            <div class="plotarea"></div>
        </div>

        <div id="grouped-editor" class="editor">
// grouped bar
var grouped = quorra.bar()
    .width(600)
    .height(400)
    .grid(true)
    .opacity(0.75)
    .layout('grouped')
    .xlabel("X Axis Label")
    .ylabel("Y Axis Label")
    .color(['firebrick', 'steelblue']);

d3.select('#grouped .plotarea')
    .datum(data).call(grouped);
        </div>
        <p class="pre-editor">Hit Cmd+Enter for changes to take effect.</p>

        <div id="stacked" class="container">
            <div class="plotarea"></div>
        </div>

        <div id="stacked-editor" class="editor">
// stacked bar
var stacked = quorra.bar()
    .width(600)
    .height(400)
    .opacity(0.75)
    .lposition("outside")
    .lshape("circle")
    .layout('stacked')
    .xlabel("X Axis Label")
    .ylabel("Y Axis Label")
    .color(['firebrick', 'steelblue']);

d3.select('#stacked .plotarea')
    .datum(data).call(stacked);
        </div>
        <p class="pre-editor">Hit Cmd+Enter for changes to take effect.</p>

    <script src="../lib/d3/d3.min.js"></script>
    <script src="../lib/underscore/underscore-min.js"></script>
    <script src="../dist/quorra.js"></script>
    <script>
        // simulate data
        quorra.seed(678);
        function layerup(n, o) {
            function bump(a) {
                var x = 1 / (.1 + quorra.random()),
                    y = 2 * quorra.random() - .5,
                    z = 10 / (.1 + quorra.random());
                for (var i = 0; i < n; i++) {
                    var w = (i / n - y) * z;
                    a[i] += x * Math.exp(-w * w);
                }
            }
            var a = [], i;
            for (i = 0; i < n; ++i) a[i] = o + o * quorra.random();
            for (i = 0; i < 5; ++i) bump(a);
            return a.map(function(d, i) { return {
                x: i,
                y: Math.max(0, d),
            }; });
        }
        var groups = 2;
        var samples = 20;
        var stack = d3.layout.stack();
        var layerdata = stack(d3.range(groups).map(function() { return layerup(samples, 0.1); }));
        var data = [];
        for (var layer in layerdata) {
            data = data.concat(_.map(layerdata[layer], function(d, i){
                return {
                    x: d.x,
                    y: d.y,
                    group: (layer == 1) ? 'Good': 'Evil',
                    label: (layer == 1) ? ('Good' + i): ('Evil' + i)
                };
            }));
        }

        // more data
        var entries = 3;
        x = ['Good', 'Evil', 'Okay'];
        y = [1, 2, 1];
        textdata = [];
        for(var i=0; i<x.length; i++){
            textdata.push({
                x: x[i],
                y: y[i]
            });
        }

    </script>

    <script>
        eval(parameterizeEditor('grouped-editor', '#grouped .plotarea svg'));
        eval(parameterizeEditor('stacked-editor', '#stacked .plotarea svg'));
    </script>

    </script>
  </body>
</html>
